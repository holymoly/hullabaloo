<!doctype html5>
<html>
    <head>
        <title>Node Authentication</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <!-- Optional theme -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <style>
            body    { padding-top:20px;}
        </style>
        <style type="text/css" media="screen">
            #editor { 
                position: relative;
                height: 200;
            }
        </style>
    </head>
    <body>
        <div class="container col-sm-9 col-md-9">
            <form class="form-horizontal" role="form" action="/save" method="post">
                <div class="form-group">
                    <label for="Category" class="col-sm-2 control-label">Category</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="Category" id="Category" placeholder="Chose a category" onkeydown = "return (event.keyCode!=13);" value=<%= category %>>
                    </div>
                </div>
                <div class="form-group">
                    <label for="Title" class="col-sm-2 control-label">Title</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="Title" id="Title" placeholder="Title of Post" onkeydown = "return (event.keyCode!=13);" value=<%= title %>>
                    </div>
                </div>
                <div class="form-group">
                    <label for="Type" class="col-sm-2 control-label">Type</label>
                    <div class="col-sm-10">
                        <select class="form-control" name="Type" id="Type" placeholder="Type of Post" onkeydown = "return (event.keyCode!=13);">
                            <option value="Text" <% if (type == 'Text') { %>selected<% } %> >Text</option>
                            <option value="Javascript" <% if (type == 'Javascript') { %>selected<% } %> >Javascript</option>
                            <option value="C#" <% if (type == 'C#') { %>selected<% } %> >C#</option>
                            <option value="C" <% if (type == 'C') { %>selected<% } %> >C</option>
                            <option value="C++" <% if (type == 'C++') { %>selected<% } %> >C++</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="Post" class="col-sm-2 control-label">Post</label>
                    <div class="col-sm-10">
                        <div id="editor"><%= post %></div>
                        <textarea name="Post" style="display: none;"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="Tags" class="col-sm-2 control-label">Tags</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="Tags"id="Tags" placeholder="Comma seperated Tags describing the Post" onkeydown = "return (event.keyCode!=13);"value=<%= tags %>>
                    </div>        
                </div>
                <label for="Tags" class="col-sm-2 control-label"></label>
                <button id="submit" type="submit" class="btn btn-primary">Save/Update</button>
            </form> 
        </div> 
        <div class="container col-sm-3 col-md-3">
            <form action="/search "class="navbar-form" role="search" method="post">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" name="srchTerm" id="srchTerm" value=<%= srchTerm %>>
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="submit">     
                            GO!
                        </button>
                    </span>
                </div>
            </form>
            <label class="col-sm-2 control-label"> Result</label>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script src="/ace/src-min/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="/ace/src-min/ext-language_tools.js"></script>
        <script>
                   
            var textarea = $('textarea[name="Post"]');
            textarea.hide();

            var editor = ace.edit("editor");
            editor.setTheme("ace/theme/ambiance");
            editor.getSession().setMode("ace/mode/javascript");
            editor.setOptions({
                enableBasicAutocompletion: true,
                enableSnippets: true,
                enableLiveAutocompletion: true
            });

            var doc = editor.getSession().getDocument()

            $('#submit').on('click', function() {
                textarea.val(editor.getSession().getValue());
            });
        </script>
    </body>
</html>